var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},BaseUI=function(e){function t(t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n="");var o=e.call(this)||this;return o._isCenter=i,o._opneUi=n,o._onCompleteEvent=t,o.addEventListener(eui.UIEvent.CREATION_COMPLETE,o.createCompleteEvent,o),o}return __extends(t,e),t.prototype.addItem=function(e){var t=this.numChildren;1>t?this.addChildAt(e,t):this.addChildAt(e,t)},t.prototype.createCompleteEvent=function(e){this._onCompleteEvent&&EventCenter.dispatchEvent(new GameEvent(this._onCompleteEvent.event,this._onCompleteEvent.par))},t.prototype.center=function(){this._isCenter&&(this.x=(AppConfig.stageWidth-this.width)/2,this.y=(AppConfig.stageHeight-this.height)/2)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.dispose=function(){},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI");var Mediator=function(){function e(e,t,i){void 0===i&&(i=""),this.callBackView="",this.name=e,this.viewComponent=t,this.onEventCenterRegister(),this.onViewRegister(),this.openPanel(),this._viewComponent.center()}return e.prototype.onViewRegister=function(){},e.prototype.onViewRemove=function(){},e.prototype.onEventCenterRegister=function(){},e.prototype.onEventCenterRemove=function(){},e.prototype.openPanel=function(){},e.prototype.removeListener=function(){this.onEventCenterRemove(),this.onViewRemove(),this.viewComponent=null},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewComponent",{get:function(){return this._viewComponent},set:function(e){this._viewComponent=e},enumerable:!0,configurable:!0}),e.prototype.callback=function(){},e}();__reflect(Mediator.prototype,"Mediator");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=640,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var DragonBones=dragonBones.DragonBones,Main=function(e){function t(){var t=e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t.musicBo=!0,t.music_btn=new eui.Image,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){AppFacade.getInstance().startUp(),this.addChild(MainUIView.getInstance()),this.setMusic(),MainUIView.getInstance().showView(new ui.GameView,ui.GameViewMediator.NAME,!0)},t.prototype.setMusic=function(){this.music_btn.source=RES.getRes("music_png"),this.music_btn.y=this.music_btn.y=105,this.music_btn.x=this.music_btn.x=540},t.prototype.onMusic=function(e){this.musicBo?(this._position=this.musicChanil.position,this.musicChanil.stop(),this.musicBo=!1):(this.musicChanil=this.music.play(this._position,0),this.musicBo=!0)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AppConfig=function(){function e(){}return e.init=function(e){this.stageWidth=e.stageWidth,this.stageHeight=e.stageHeight},e}();__reflect(AppConfig.prototype,"AppConfig");var common;!function(e){var t=function(){function e(){}return e.getBitmap=function(e){return new egret.Bitmap(RES.getRes(e))},e}();e.Utils=t,__reflect(t.prototype,"common.Utils")}(common||(common={}));var EventCenter=function(){function e(){}return e.addEventListener=function(e,t,i,n,o){this.instance.addEventListener(e,t,i,n,o)},e.dispatchEvent=function(e){this.instance.dispatchEvent(e)},e.hasEventListener=function(e){return this.instance.hasEventListener(e)},e.removeEventListener=function(e,t,i,n){this.instance.removeEventListener(e,t,i,n)},e}();EventCenter.instance=new egret.EventDispatcher,__reflect(EventCenter.prototype,"EventCenter");var GameEvent=function(e){function t(t,i,n,o){var r=e.call(this,t,n,o)||this;return r.parameter=i,r}return __extends(t,e),t}(egret.Event);__reflect(GameEvent.prototype,"GameEvent");var GameEventConstant=function(){function e(){}return e}();GameEventConstant.INIT_GAME="INIT_GAME",__reflect(GameEventConstant.prototype,"GameEventConstant");var AppFacade=function(){function e(){this.mediatorDictionary=new Dictionary,this.proxyDictionary=new Dictionary}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.registerMediator=function(e){this.mediatorDictionary[e.name]=e},e.prototype.registerProxy=function(e){this.proxyDictionary[e.name]=e},e.prototype.getProxyByName=function(e){return this.proxyDictionary[e]},e.prototype.getMediatorByName=function(e){return this.mediatorDictionary[e]},e.prototype.delMediatorByName=function(e){var t=this.mediatorDictionary[e];t&&t.removeListener(),this.mediatorDictionary[e]=null,delete this.mediatorDictionary[e]},e.prototype.startUp=function(){ProxyManager.start()},e}();__reflect(AppFacade.prototype,"AppFacade");var Proxy=function(){function e(e){this.name=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),e}();__reflect(Proxy.prototype,"Proxy");var ProxyManager=function(){function e(){}return e.start=function(){},e}();__reflect(ProxyManager.prototype,"ProxyManager");var NetConnect=function(){function e(){}return e.getInstance=function(){return null==e._instance&&(e._instance=new e),e._instance},e}();__reflect(NetConnect.prototype,"NetConnect");var NetMessage=function(){function e(){}return e}();NetMessage.INIT_GAME_DATA="http://activity.afocus.com.cn/herochange/hero/index.do",NetMessage.ADD_POINT="http://activity.afocus.com.cn/herochange/hero/attr.do",NetMessage.CHANGE_TEAM="http://activity.afocus.com.cn/herochange/hero/chHero.do",NetMessage.PASS_CUSTOMS="http://activity.afocus.com.cn/herochange/hero/winGame.do",NetMessage.UPDATEUSER="http://activity.afocus.com.cn/herochange/hero/updateUser.do",__reflect(NetMessage.prototype,"NetMessage");var Dictionary=function(){function e(){this._keys=[],this._values=[]}return e.prototype.add=function(e,t){this[e]=t;var i=this._keys.indexOf(e);-1===i?(this._keys.push(e),this._values.push(t)):(this._keys[i]=e,this._values[i]=t)},e.prototype.remove=function(e){console.debug(JSON.stringify(this._keys));var t=this._keys.indexOf(e,0);this._keys.splice(t,1),this._values.splice(t,1),delete this[e]},e.prototype.clean=function(){var e,t=this._keys.length;for(e=0;t>e;e++){var i=this._keys[e];delete this[i]}this._keys=[],this._values=[]},e.prototype.keys=function(){return this._keys},e.prototype.values=function(){return this._values},e.prototype.containsKey=function(e){return"undefined"==typeof this[e]?!1:!0},e.prototype.toLookup=function(){return this},e.prototype.getValue=function(e){return this[e]},e}();__reflect(Dictionary.prototype,"Dictionary",["interfaces.IDictionary"]);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var utils;!function(e){function t(e,t){var i=new egret.DisplayObjectContainer,n=new egret.Bitmap;n.texture=RES.getRes(e);var o=new egret.Bitmap;return o.texture=RES.getRes(t),i.addChild(o),i.addChild(n),n.x=(o.width-n.width)/2,n.y=(o.height-n.height)/2,i}e.picLayoutCenter=t}(utils||(utils={}));var SoundManager=function(){function e(){}return e.playBgSound=function(e,t,i){if(void 0===e&&(e=!0),void 0===t&&(t="gamemusic_mp3"),void 0===i&&(i=0),this.BG_SOUND_OPEN=!0,egret.localStorage.setItem("sound",this.BG_SOUND_OPEN.toString()),e)this.playEffect(!0);else{var n=RES.getRes(t);this.sdbg_channel=n.play(0,i),this.sdbg_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(e){console.log("èƒŒæ™¯æ’­æ”¾å®Œæ¯•")},this)}},e.stopBgSound=function(e){void 0===e&&(e=!0),this.BG_SOUND_OPEN&&(this.BG_SOUND_OPEN=!1,egret.localStorage.setItem("sound",this.BG_SOUND_OPEN.toString()),e?this.effect_channel.stop():this.sdbg_channel.stop())},e.playEffect=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t="effect_mp3"),void 0===i&&(i=0),this.BG_SOUND_OPEN){e||this.sdbg_channel.stop();var n=RES.getRes(t);this.effect_channel=n.play(0,i),this.effect_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(e){console.log("éŸ³æ•ˆæ’­æ”¾å®Œæ¯•")},this)}},e.stopEffectSound=function(){this.BG_SOUND_OPEN&&(this.effect_channel.stop(),this.playBgSound(!1))},e}();SoundManager.BG_SOUND_OPEN=!0,SoundManager.EFF_SOUND_OPEN=!0,__reflect(SoundManager.prototype,"SoundManager");var utils;!function(e){var t=function(){function e(){}return e.getBitmap=function(e){return new egret.Bitmap(RES.getRes(e))},e.showNum=function(e,t,i,n){if(void 0===n&&(n=!0),n)for(;e.numChildren;)e.removeChildAt(0);if(!(0>t)){var o=t.toString(),r=o.split(".");o=r[0];for(var s,a=0,h=0;h<o.length;h++)s=new eui.Image,s.source=RES.getRes(name),s.x=a,e.addChild(s),a+=s.width}},e.getTime=function(e,t){void 0===t&&(t=1);var i,n=Math.floor(e/1e3),o=Math.floor(n%60),r=Math.floor(n/60);r=r>=60?Math.floor(r%60):r;var s=Math.floor(n/3600);if(s>24&&4==t)return Math.floor(s/24)+"å¤©";switch(t){case 1:i=this.addPlace(r)+":"+this.addPlace(o);break;case 2:i=this.addPlace(s)+":"+this.addPlace(r)+":"+this.addPlace(o);break;case 3:i=n.toString()}return i},e.addPlace=function(e,t,i,n){void 0===t&&(t="0"),void 0===i&&(i=2),void 0===n&&(n=!0);for(var o="",r=i-e.toString().length,s=0;r>s;s++)o+=t;return n?o+e:e+o},e}();e.UIUtils=t,__reflect(t.prototype,"utils.UIUtils")}(utils||(utils={}));var utils;!function(e){function t(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n,o=!0,r=0,s=t.length;s>r;r++)if(n=t[r],void 0===e[n]){o=!1;break}return o}function i(e,t,i,n){n||(n=i);var o,r,s=Math.min(i.length,n.length);for(o=0;s>o;o++)switch(r=t[n[o]],typeof r){case"string":case"number":case"boolean":e[i[o]]=r;break;case"object":if(r.slice)e[i[o]]=r.slice();else{var a,h={};for(a in r)h[a]=r[a];e[i[o]]=h}}}function n(e,t,n){var r;return r=n.map(function(e){return o(e)}),i(e,t,n,r)}function o(e){if(!e||0===e.length)return"";var t=e.charCodeAt(0);return t>=97&&122>=t?(t-=32,String.fromCharCode(t)+e.substring(1)):e}function r(e,t){if(t.x==e.x)return t.y>e.y?.5*Math.PI:1.5*Math.PI;if(t.y==e.y)return t.x>e.x?0:Math.PI;var i=Math.atan((e.y-t.y)/(e.x-t.x));return t.x<e.x&&t.x>e.x?i+Math.PI:t.x<e.x&&t.x<e.x?i+Math.PI:t.x>e.x&&t.x<e.x?i+2*Math.PI:i}function s(e,t){var i;return i=e.x==t.x?e.y!=t.y?Math.abs(e.y-t.y):0:e.y==t.y?e.x!=t.x?Math.abs(e.x-t.x):0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function a(e){if(e)for(;e.numChildren>0;)e.removeChildAt(0)}function h(e,t,i){void 0===i&&(i=!1);var n=RES.getRes(e+"_json"),o=null;return n&&(o=n[t]),o}function c(e,t,i,n){void 0===n&&(n=!1);var o,r,s=RES.getRes(e+"_json");if(s)if(r=[],s instanceof Array)for(var a=0,h=s.length;h>a;a++)o=s[a],o[t]===i&&r.push(o.Id);else for(var c in s)o=s[c],o[t]===i&&r.push(o.Id);return r}e.hasProperties=t,e.copyProperties=i,e.copyPropertiesFromStaticData=n,e.initialUpper=o,e.pointToAngle=r,e.getPointDistance=s,e.removeChildren=a,e.getStaticDataByNameAndId=h,e.getStaticIdsByNameAndParentId=c}(utils||(utils={}));var ui;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createCompleteEvent=function(i){t.prototype.createCompleteEvent.call(this,i),this.skinName="resource/game_skins/view_1.exml",AppFacade.getInstance().registerMediator(new e.GameViewMediator(this)),this.init(),console.log("åŠ è½½å®Œæˆ")},i.prototype.init=function(){},i}(BaseUI);e.GameView=t,__reflect(t.prototype,"ui.GameView")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._SaomiaoTime=0,e.passTime=0,e}return __extends(i,t),i.prototype.createCompleteEvent=function(i){t.prototype.createCompleteEvent.call(this,i),this.skinName="resource/game_skins/view_2.exml",AppFacade.getInstance().registerMediator(new e.GameViewMediator1(this)),this.init(),console.log("3")},i.prototype.init=function(){egret.Tween.get(this._View_DD,{loop:!0,onChangeObj:this}).wait(10).to({alpha:.3},700).to({alpha:1},800).wait(10).to({alpha:0},1e3),egret.Tween.get(this._View_DD1,{loop:!0,onChangeObj:this}).wait(10).to({alpha:.8},500).to({alpha:1},1e3).wait(10).to({alpha:0},800),this._SaomiaoTime=Math.floor(3001*Math.random()+2e3),0!=this._SaomiaoTime&&egret.Ticker.getInstance().register(this.onTick,this),this._Saomiao.anchorOffsetX=350,this._Saomiao.anchorOffsetY=350,this._Saomiao.x=320,this._Saomiao.y=390,egret.Tween.get(this._Saomiao,{loop:!0,onChangeObj:this}).to({rotation:360},5e3)},i.prototype.onTick=function(e){this.passTime+=e,this.passTime>=this._SaomiaoTime&&(egret.Ticker.getInstance().unregister(this.onTick,this),egret.Tween.removeTweens(this._Saomiao),egret.Tween.removeTweens(this._View_DD),egret.Tween.removeTweens(this._View_DD1),this._Saomiao.visible=!1,this._View_DD.visible=!1,this._View_DD1.visible=!1,this._View_2_DESC.visible=!1,this._View_2_D.visible=!0,egret.Tween.get(this._View_2_D,{loop:!1,onChangeObj:this}).to({y:256},300).wait(1e3).call(function(){this._Leida.visible=!1,this._View_2_TO.visible=!0,this._View_2_GO.visible=!0,this._View_2_D.visible=!1,this._View_2_BG.source="resource/assets/ItemRenderer/view_2_bg_to.jpg"},this))},i.prototype.timerComFunc=function(e){},i}(BaseUI);e.GameView1=t,__reflect(t.prototype,"ui.GameView1")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.treeArr=[],e.numZhangAi=0,e}return __extends(i,t),i.prototype.createCompleteEvent=function(t){this.skinName="resource/game_skins/view_3.exml",AppFacade.getInstance().registerMediator(new e.GameViewMediator2(this)),console.log("åŠ è½½å®Œæˆ"),this.role=new Role("map"),this.role.x=0,this.role.y=0,this.addChild(this.role);for(var i=1;3>i;i++){var n=new egret.Bitmap,o=Math.floor(5*Math.random()),r="";o%2===0?(r="buff_2_png",n.x=204,n.y=-7952+3200*i):(r="buff_2_png",n.x=340,n.y=-7952+2700*i),n.texture=RES.getRes(r),this._group.addChildAt(n,10),this.treeArr.push(n)}},i}(BaseUI);e.GameView2=t,__reflect(t.prototype,"ui.GameView2")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createCompleteEvent=function(i){t.prototype.createCompleteEvent.call(this,i),this.skinName="resource/game_skins/view_4.exml",AppFacade.getInstance().registerMediator(new e.GameViewFSMediator(this)),this.init(),console.log("åŠ è½½å®Œæˆ"),egret.Tween.get(this.xiaoshou,{loop:!0,onChangeObj:this}).to({x:this.xiaoshou.x-10,y:this.xiaoshou.y-10},500).to({x:this.xiaoshou.x,y:this.xiaoshou.y},500),egret.Tween.get(this.diadesc,{loop:!1,onChangeObj:this}).to({y:723},500).wait(1e3)},i.prototype.init=function(){},i}(BaseUI);e.GameViewFS=t,__reflect(t.prototype,"ui.GameViewFS")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.prototype.onViewRegister=function(){this.view.btnD.addEventListener(egret.TouchEvent.TOUCH_TAP,this._daoChe,this),this.view.btnQ.addEventListener(egret.TouchEvent.TOUCH_TAP,this._goQuan,this)},t.prototype.onViewRemove=function(){this.view.btnD.addEventListener(egret.TouchEvent.TOUCH_TAP,this._daoChe,this),this.view.btnQ.addEventListener(egret.TouchEvent.TOUCH_TAP,this._goQuan,this)},t.prototype.onEventCenterRegister=function(){},t.prototype.onEventCenterRemove=function(){},t.prototype._daoChe=function(){this.view.diadesc.visible=!1,egret.Tween.removeTweens(this.view.xiaoshou),egret.Tween.get(this.view.daoche,{loop:!1,onChangeObj:this}).to({rotation:-73,x:300,y:380},1e3).to({x:80,y:310},1e3).wait(500).call(this.onComplate,this)},t.prototype.onComplate=function(){document.getElementById("dialogMask").style.display="block",this.view.btnD.touchEnabled=!1,document.getElementById("close").addEventListener("touchstart",function(e){e.preventDefault(),document.getElementById("dialogMask").style.display="none"},!1),this.view.xiaoshou.x=545,egret.Tween.get(this.view.xiaoshou,{loop:!0,onChangeObj:this}).to({x:this.view.xiaoshou.x-10,y:this.view.xiaoshou.y-10},500).to({x:this.view.xiaoshou.x,y:this.view.xiaoshou.y},500)},t.prototype._goQuan=function(){window.location.href="http://rm.sina.com.cn/chenbin5/201611bmwtest/1111/index.htm"},t}(Mediator);t.NAME="GameViewFSMediator",e.GameViewFSMediator=t,__reflect(t.prototype,"ui.GameViewFSMediator")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(e){return t.call(this,i.NAME,e)||this}return __extends(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.prototype.onViewRegister=function(){this.view._page1.addEventListener(egret.TouchEvent.TOUCH_TAP,this._nextPage,this)},i.prototype.onViewRemove=function(){},i.prototype.onEventCenterRegister=function(){},i.prototype.onEventCenterRemove=function(){},i.prototype._nextPage=function(e){this.onAnmationComplete()},i.prototype.onAnmationComplete=function(){MainUIView.getInstance().showView(new e.GameViewNew1,e.GameViewMediatorNew1.NAME,!0),MainUIView.getInstance().closeView("GameViewMediator")},i}(Mediator);t.NAME="GameViewMediator",e.GameViewMediator=t,__reflect(t.prototype,"ui.GameViewMediator")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(e){return t.call(this,i.NAME,e)||this}return __extends(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.prototype.onViewRegister=function(){this.view._View_2_GO.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onToGo,this),this.view.mapBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source="mapPop1_png"},this),this.view.mapBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source="mapPop2_png"},this),this.view.mapBtn3.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source="mapPop3_png"},this),this.view.mapBtn4.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source="mapPop4_png"},this),this.view.mapBtn5.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source="mapPop5_png"},this),this.view._mapPopBox.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){this.view._mapPopBox.source=""},this)},i.prototype.onEventCenterRegister=function(){},i.prototype.onEventCenterRemove=function(){},i.prototype._onToGo=function(){this.view.anmationBox.visible=!0,egret.Tween.get(this.view.leftBox,{loop:!1,onChangeObj:this}).to({x:-340,y:-500},500),egret.Tween.get(this.view.rightBox,{loop:!1,onChangeObj:this}).to({x:660,y:-500},500).call(function(){MainUIView.getInstance().showView(new e.GameView2,e.GameViewMediator2.NAME,!0),MainUIView.getInstance().closeView("GameViewMediator1")})},i}(Mediator);t.NAME="GameViewMediator1",e.GameViewMediator1=t,__reflect(t.prototype,"ui.GameViewMediator1")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.prototype.onViewRegister=function(){this.view._BtnLeft.addEventListener(egret.TouchEvent.TOUCH_TAP,this._LeftMove,this),this.view._BtnRight.addEventListener(egret.TouchEvent.TOUCH_TAP,this._RightMove,this),this.view.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reGame,this)},t.prototype.onViewRemove=function(){this.view._BtnLeft.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._LeftMove,this),this.view._BtnRight.removeEventListener(egret.TouchEvent.TOUCH_TAP,this._RightMove,this),this.view.close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.reGame,this)},t.prototype.onEventCenterRegister=function(){EventCenter.addEventListener(GameEventConstant.INIT_GAME,this.startGame,this)},t.prototype.onEventCenterRemove=function(){EventCenter.removeEventListener(GameEventConstant.INIT_GAME,this.startGame,this)},t.prototype.startGame=function(){console.log("å¼€å§‹æ¸¸æˆ"),egret.Tween.get(this.view._group,{loop:!1,onChange:this.onChange,onChangeObj:this}).to({y:7952},15e3).call(function(){this.view._BtnLeft.touchEnabled=!0,egret.Tween.get(this.view._Che,{loop:!1,onChangeObj:this}).to({y:-200},1600).call(function(){MainUIView.getInstance().closeView("GameViewMediator2"),document.getElementById("dialogMaskWrap").style.display="block"})},this)},t.prototype.onChange=function(){for(var e=0;e<this.view.treeArr.length;e++){var t=this.view._group.localToGlobal(this.view.treeArr[e].x,this.view.treeArr[e].y),i=this.view._Che.hitTestPoint(this.view.treeArr[e].x,t.y,!1);1==i&&(3===e?this.view.photoMap.source="mapPopText1_png":2===e?this.view.photoMap.source="mapPopText2_png":1===e?this.view.photoMap.source="mapPopText1_png":0===e&&(this.view.photoMap.source="mapPopText2_png"),this.view.dialog.visible=!0,egret.Tween.get(this.view.guang1,{loop:!1,onChangeObj:this}).to({alpha:1},100).wait(10).to({alpha:0},80).to({alpha:1},110).wait(10).to({alpha:0},120).to({alpha:1},110),egret.Tween.get(this.view.guang2,{loop:!1,onChangeObj:this}).to({alpha:1},120).wait(10).to({alpha:0},100).to({alpha:1},90).wait(10).to({alpha:0},120).to({alpha:1},110),egret.Tween.pauseTweens(this.view._group),this.view._group.removeChild(this.view.treeArr[e]),this.view.treeArr.splice(e,1))}},t.prototype._LeftMove=function(){200!=this.view._Che.x?(this.view._BtnLeft.touchEnabled=!1,egret.Tween.get(this.view._Che,{loop:!1,onChangeObj:this}).to({x:200},200).call(function(){this.view._BtnLeft.touchEnabled=!0},this)):console.log("è½¦å·²ç»åœ¨å·¦è¾¹äº†")},t.prototype._RightMove=function(){335!=this.view._Che.x?(this.view._BtnRight.touchEnabled=!1,egret.Tween.get(this.view._Che,{loop:!1,onChangeObj:this}).to({x:335},200).call(function(){this.view._BtnRight.touchEnabled=!0},this)):console.log("è½¦å·²ç»åœ¨å³è¾¹äº†")},t.prototype.reGame=function(){console.log("ç»§ç»­æ¸¸æˆ"),this.view.dialog.visible=!1,egret.Tween.resumeTweens(this.view._group)},t}(Mediator);t.NAME="GameViewMediator2",e.GameViewMediator2=t,__reflect(t.prototype,"ui.GameViewMediator2")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(e){return t.call(this,i.NAME,e)||this}return __extends(i,t),Object.defineProperty(i.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),i.prototype.onViewRegister=function(){this.view._btn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this._nextPage,this)},i.prototype.onViewRemove=function(){},i.prototype.onEventCenterRegister=function(){},i.prototype.onEventCenterRemove=function(){},i.prototype._nextPage=function(e){this.onAnmationComplete()},i.prototype.onAnmationComplete=function(){console.log(1),MainUIView.getInstance().showView(new e.GameView1,e.GameViewMediator1.NAME,!0),MainUIView.getInstance().closeView("GameViewMediatorNew1")},i}(Mediator);t.NAME="GameViewMediatorNew1",e.GameViewMediatorNew1=t,__reflect(t.prototype,"ui.GameViewMediatorNew1")}(ui||(ui={}));var ui;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createCompleteEvent=function(i){t.prototype.createCompleteEvent.call(this,i),this.skinName="resource/game_skins/view_1_2.exml",AppFacade.getInstance().registerMediator(new e.GameViewMediatorNew1(this)),console.log("2")},i}(BaseUI);e.GameViewNew1=t,__reflect(t.prototype,"ui.GameViewNew1")}(ui||(ui={}));var Role=function(e){function t(t){var i=e.call(this)||this;return i.roleID="",i.roleID=t,i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i.onAddToStage(),i}return __extends(t,e),t.prototype.onAddToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this);var e=RES.getRes(this.roleID+"_json"),t=RES.getRes(this.roleID+"_png");this.roleFace=new egret.MovieClipDataFactory(e,t),this.role=new egret.MovieClip(this.roleFace.generateMovieClipData("map")),this.role.play(1),this.addChild(this.role),console.log("æ’­æ”¾äº†åŠ¨ç”»"),this.role.addEventListener(egret.Event.COMPLETE,function(){console.log("æ’­æ”¾å®Œæˆ"),this.removeChild(this.role),EventCenter.dispatchEvent(new GameEvent(GameEventConstant.INIT_GAME))},this)},t.prototype.roleAttack=function(e,t){this.role.movieClipData=this.roleFace.generateMovieClipData(e),this.role.play(t),this.role.addEventListener(egret.Event.COMPLETE,this.roleAttackComplete,this)},t.prototype.monsterClip=function(){this.role.movieClipData=this.roleFace.generateMovieClipData("tou"),this.role.play(-1)},t.prototype.roleAttackComplete=function(){this.role.removeEventListener(egret.Event.COMPLETE,this.roleAttackComplete,this),this.role.movieClipData=this.roleFace.generateMovieClipData("stand"),this.role.play(-1)},t}(egret.DisplayObjectContainer);__reflect(Role.prototype,"Role");var MainUIView=function(e){function t(){var t=e.call(this)||this;return t.winMap=new Dictionary,t.currentShowView=[],t.uiLayer=new egret.DisplayObjectContainer,t.addChild(t.uiLayer),t.otherLayer=new egret.DisplayObjectContainer,t.addChild(t.otherLayer),t.mainLayer=new egret.DisplayObjectContainer,t.addChild(t.mainLayer),t}return __extends(t,e),t.prototype.addItem=function(e){this.uiLayer.addChild(e)},t.prototype.addViewToOtherLayer=function(e){this.otherLayer.addChild(e)},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.showView=function(e,t,i){void 0===i&&(i=!1),this.winMap.containsKey(t)||(this.winMap.add(t,e),this.uiLayer.addChild(e),i?e.show():e.hide())},t.prototype.showViewByMediatorName=function(e){if(this.winMap.containsKey(e)){var t=this.winMap.getValue(e);t.show()}},t.prototype.closeAllView=function(){var e,t=this.currentShowView.length;for(e=0;t>e;e++){var i=this.currentShowView[e];this.closeView(i),e--,t=this.currentShowView.length}},t.prototype.getViewIsShow=function(e){var t=this.winMap.getValue(e);return t?t.visible:!1},t.prototype.hideView=function(e){var t=this.winMap.getValue(e);t&&t.hide()},t.prototype.closeView=function(e){var t=this.currentShowView.indexOf(e);if(-1!==t&&this.currentShowView.splice(t,1),this.winMap.containsKey(e)){var i=this.winMap.getValue(e);i.hide(),AppFacade.getInstance().delMediatorByName(e),this.winMap.remove(e),i.parent&&i.parent.removeChild(i),i.dispose(),i=null}},t}(egret.DisplayObjectContainer);__reflect(MainUIView.prototype,"MainUIView");var ui;!function(e){var t=function(e){function t(t,i,n){var o=e.call(this)||this;return o.nowHeight=0,o.nowWidth=0,o.widthN=0,o.heightN=0,o.items=[],o.buttonTF=[],o.layoutType=t,o.widthN=i,o.heightN=n,o}return __extends(t,e),t.prototype.addItem=function(e,t){1==this.layoutType?(e.y=0,e.x=this.nowWidth,this.nowWidth+=e.width+this.widthN):(e.x=0,e.y=this.nowHeight,this.nowHeight+=e.height+this.heightN),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this._selectItem,this),this.addChild(e),0==t?this.items.push(e):this.buttonTF.push(e)},t.prototype.addItems=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n,o;for(n=0,o=e.length;o>n;n++)this.addItem(e[n],t);0==t&&e[i].dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP))},t.prototype.selectItem=function(e){var t=this.items[e];return t.dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP)),t},t.prototype.itemRepPos=function(e){this.addChild(this.items[e])},t.prototype._selectItem=function(e){void 0===e&&(e=null);var t,i,n;for(t=0,i=this.items.length;i>t;t++){var o=this.items[t],r=o;e.currentTarget===o?(r.enabled&&(r.currentState="down",this.setChildIndex(o,this.items.length-1)),n=t):r.enabled&&(this.setChildIndex(o,t),r.currentState="up")}for(t=0,i=this.buttonTF.length;i>t;t++){var o=this.buttonTF[t];t==n?o.currentState="down":o.currentState="up"}},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(eui.Group);e.BaseTabBar=t,__reflect(t.prototype,"ui.BaseTabBar")}(ui||(ui={}));
